"use strict";(self.webpackChunkcolink_client=self.webpackChunkcolink_client||[]).push([[263],{83263:function(e,t,n){n.r(t);var s=n(74165),r=n(15861),i=n(29439),c=n(72791),l=n(78983),a=n(24846),o=n(4031),u=n(59434),d=n(63303),h=n(28406),x=n(80184);t.default=function(){var e=(0,c.useState)(!1),t=(0,i.Z)(e,2),n=t[0],m=t[1],p=(0,c.useState)(!1),f=(0,i.Z)(p,2),j=f[0],v=f[1],b=(0,c.useState)(!1),y=(0,i.Z)(b,2),g=y[0],k=y[1],C=(0,c.useState)(!1),w=(0,i.Z)(C,2),N=w[0],Z=w[1],S=(0,c.useState)(!1),L=(0,i.Z)(S,2),T=L[0],A=L[1],I=(0,c.useState)(""),W=(0,i.Z)(I,2),H=W[0],J=W[1],z=(0,c.useState)(""),M=(0,i.Z)(z,2),O=M[0],V=M[1],Y=(0,c.useState)({}),R=(0,i.Z)(Y,2),D=R[0],B=R[1],P=(0,c.useState)(""),E=(0,i.Z)(P,2),F=E[0],U=E[1],_=(0,u.v9)((function(e){return e.client})).client,q=(0,u.I0)();function K(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.OO)(_,t).then((function(e){"invalid"!==e?(q((0,d.nA)(t)),localStorage.setItem("jwt",t),"user"===e?(q((0,d.w8)(!1)),localStorage.setItem("isAdmin","false")):(q((0,d.w8)(!0)),localStorage.setItem("isAdmin","true"))):alert("Error: Invalid JWT or hostname.")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return X=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.ht)(_,{authorization:""});case 2:return t=e.sent,e.next=5,(0,h.RA)(_,"",t).then((function(e){K(e)})).catch(function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(t),k(!0),v(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function G(){return(G=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.nd)(_,t,D).then((function(e){K(e.userJwt),k(!1),v(!1)})).catch((function(e){alert(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,x.jsxs)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:[(0,x.jsx)(l.KB,{children:(0,x.jsx)(l.rb,{className:"justify-content-center",children:(0,x.jsx)(l.b7,{md:6,children:(0,x.jsxs)(l.xH,{children:[(0,x.jsx)(l.bn,{className:"text-center p-4",children:(0,x.jsx)("h1",{children:"CoLink Login"})}),(0,x.jsx)(l.sl,{className:"text-center p-4",children:(0,x.jsxs)(l.lx,{onSubmit:function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),A(!1),Z(!0),e.next=5,(0,h.TL)(H);case 5:if(!e.sent){e.next=12;break}Z(!1),v(!0),q((0,d.UY)(H)),localStorage.setItem("address",H),e.next=13;break;case 12:A(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,x.jsx)("h4",{children:"Official Server"}),(0,x.jsx)("p",{className:"text-medium-emphasis mb-3",style:{fontSize:"18px"},children:"Connect to an official CoLink server from the list of servers below:"}),(0,x.jsxs)(l.YR,{className:"mb-4",style:{width:"80%",marginLeft:"10%"},children:[(0,x.jsx)(l.wV,{children:(0,x.jsx)(a.Z,{icon:o.e})}),(0,x.jsx)(l.LX,{className:"mx-auto",style:{width:"80%"},"aria-label":"Default select",options:[{label:"Custom Server (configure below)",value:" "},{label:"test-0 (https://test-0.colink-server.colearn.cloud)",value:"https://test-0.colink-server.colearn.cloud"},{label:"test-1 (https://test-1.colink-server.colearn.cloud)",value:"https://test-1.colink-server.colearn.cloud"},{label:"test-2 (https://test-2.colink-server.colearn.cloud)",value:"https://test-2.colink-server.colearn.cloud"}],onChange:function(e){J(e.target.value)," "!==e.target.value?m(!0):m(!1)}})]}),(0,x.jsx)("div",{className:"d-flex justify-content-center mb-2",children:(0,x.jsx)("div",{style:{width:"100%",textAlign:"center",borderBottom:"1px solid lightgray",lineHeight:"0.1em",margin:"10px 0 20px"},children:(0,x.jsx)("span",{style:{background:"#fff",padding:"0 15px"},children:"OR"})})}),(0,x.jsx)("h4",{children:"Custom Server"}),(0,x.jsx)("p",{className:"text-medium-emphasis mb-3",style:{fontSize:"18px"},children:"Specify a custom CoLink server address to connect to:"}),(0,x.jsxs)(l.YR,{className:"mb-3",style:{width:"80%",marginLeft:"10%"},children:[(0,x.jsx)(l.wV,{children:(0,x.jsx)(a.Z,{icon:o.e})}),(0,x.jsx)(l.jO,{disabled:n,placeholder:"Custom Address",onChange:function(e){J(e.target.value)}})]}),(0,x.jsx)(l.u5,{color:"primary",active:!0,tabIndex:-1,type:"submit",children:"Connect"})]})})]})})})}),(0,x.jsx)(l.Tk,{backdrop:"static",visible:N,onClose:function(){return Z(!1)},alignment:"center",children:(0,x.jsx)(l.sD,{children:(0,x.jsx)(l.dL,{children:(0,x.jsx)(l.xH,{className:"p-2",children:(0,x.jsx)(l.sl,{className:"text-center",children:T?(0,x.jsxs)(l.lx,{onSubmit:function(){A(!1),J(""),Z(!1)},children:[(0,x.jsx)("p",{className:"text-medium-emphasis mb-3",style:{fontSize:"18px"},children:"Error connecting to the server. Please specify a different address."}),(0,x.jsx)(l.u5,{color:"primary",active:!0,tabIndex:-1,type:"submit",children:"Close"})]}):(0,x.jsxs)(l.lx,{onSubmit:function(){Z(!1)},children:[(0,x.jsx)("p",{className:"text-medium-emphasis mb-3",style:{fontSize:"18px"},children:"Connecting to server..."}),(0,x.jsx)(l.u5,{color:"primary",active:!0,tabIndex:-1,type:"submit",children:"Cancel"})]})})})})})}),(0,x.jsxs)(l.Tk,{size:"xl",backdrop:"static",visible:j,onClose:function(){return v(!1)},alignment:"center",children:[(0,x.jsx)(l.p0,{children:(0,x.jsx)(l.fl,{children:"Specify your JWT or use Metamask to connect to the server."})}),(0,x.jsx)(l.sD,{children:(0,x.jsxs)(l.dL,{children:[(0,x.jsx)(l.xH,{className:"p-4",children:(0,x.jsxs)(l.sl,{className:"text-center",children:[(0,x.jsxs)(l.lx,{children:[(0,x.jsx)("h2",{children:"JWT"}),(0,x.jsx)("p",{className:"mt-3 text-medium-emphasis",children:"Upload your JWT as a text file or manually paste it in the box below."}),(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(l.jO,{style:{width:"55%"},className:"mx-auto",type:"file",id:"formFile",onChange:function(e){(0,d.j2)(e,V)}})}),(0,x.jsxs)(l.YR,{className:"mb-3",children:[(0,x.jsx)(l.wV,{children:"JWT"}),(0,x.jsx)(l.PB,{"aria-label":"text input",style:{resize:"none",height:"150px"},value:O,onChange:function(e){V(e.target.value)}})]})]}),(0,x.jsx)(l.u5,{color:"primary",active:!0,tabIndex:-1,onClick:function(){return K(O)},children:"Confirm"})]})}),(0,x.jsx)(l.xH,{className:"p-4",style:{width:"30%"},children:(0,x.jsx)(l.sl,{className:"text-center",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{children:"Metamask"}),(0,x.jsxs)("p",{className:"mt-3 mb-3 text-medium-emphasis",children:["Connect your Metamask wallet using the button below. ",(0,x.jsx)("br",{})," Note: if you have not registered a Metamask account, you must provide an admin JWT to register it."]}),(0,x.jsx)(l.u5,{active:!0,tabIndex:-1,onClick:function(){return function(){return X.apply(this,arguments)}()},children:"Connect Wallet"})]})})})]})}),(0,x.jsx)(l.Ym,{children:(0,x.jsx)(l.u5,{color:"secondary",onClick:function(){return v(!1)},children:"Close"})})]}),(0,x.jsxs)(l.Tk,{size:"lg",backdrop:"static",style:{maxWidth:"75%",marginLeft:"12.5%"},visible:g,onClose:function(){return k(!1)},alignment:"center",children:[(0,x.jsx)(l.p0,{children:(0,x.jsx)(l.fl,{children:"Account not registered"})}),(0,x.jsx)(l.sD,{children:(0,x.jsx)(l.dL,{children:(0,x.jsx)(l.xH,{className:"p-4",children:(0,x.jsxs)(l.sl,{className:"text-center",children:[(0,x.jsxs)(l.lx,{children:[(0,x.jsx)("h2",{children:"JWT"}),(0,x.jsx)("p",{className:"mt-3 text-medium-emphasis",children:"Provide an admin JWT to register your MetaMask account on this CoLink server!"}),(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(l.jO,{style:{width:"55%"},className:"mx-auto",type:"file",id:"formFile",onChange:function(e){(0,d.j2)(e,U)}})}),(0,x.jsxs)(l.YR,{className:"mb-3",children:[(0,x.jsx)(l.wV,{children:"JWT"}),(0,x.jsx)(l.PB,{"aria-label":"text input",style:{resize:"none",height:"100px"},value:F,onChange:function(e){U(e.target.value)}})]})]}),(0,x.jsx)(l.u5,{color:"primary",active:!0,tabIndex:-1,onClick:function(){return function(e){return G.apply(this,arguments)}(F)},children:"Confirm"})]})})})}),(0,x.jsx)(l.Ym,{children:(0,x.jsx)(l.u5,{color:"secondary",onClick:function(){k(!1),v(!0)},children:"Close"})})]})]})}},4031:function(e,t,n){n.d(t,{e:function(){return s}});var s=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M256,16C123.452,16,16,123.452,16,256S123.452,496,256,496,496,388.548,496,256,388.548,16,256,16ZM175.047,447.667A208.26,208.26,0,0,1,64.333,175.047c1.018-2.408,2.092-4.785,3.2-7.145L120,215.126v63.235L197.1,360H236v49.047l-47.052,43.915Q181.926,450.568,175.047,447.667Zm228.031-44.589A207.253,207.253,0,0,1,256,464a210.4,210.4,0,0,1-29.722-2.107L268,422.953V328H210.9L152,265.639V200.874L83.7,139.408a209.259,209.259,0,0,1,91.343-75.075A207.793,207.793,0,0,1,371.3,82.839l-45.564,58.582,15.49,38.725-10.485,10.485-78.618-15.723L208,208v88H384l50.345,67.126A208.127,208.127,0,0,1,403.078,403.078ZM464,256a206.763,206.763,0,0,1-13.873,74.837L400,264H240V224l19.877-14.908,81.382,16.277,37.515-37.515-16.51-41.275,34.2-43.977q3.361,3.084,6.61,6.32A207.253,207.253,0,0,1,464,256Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=263.cde4d8c3.chunk.js.map