"use strict";(self.webpackChunkcolink_client=self.webpackChunkcolink_client||[]).push([[380],{22380:function(n,t,e){e.r(t),e.d(t,{getPrefixFromPath:function(){return d},isDirectory:function(){return x},useFileActionHandler:function(){return v}});var r=e(93433),i=e(29439),u=e(74165),s=e(15861),c=e(72791),a=e(78983),o=e(38108),f=e(50427),l=e(59434),p=e(28406),h=e(80184);function d(n){return n.substring(0,n.indexOf("@"))}function x(n){return"@0"===n.slice(-2)}(0,o._5)({iconComponent:f.K});var m=function(){var n=(0,s.Z)((0,u.Z)().mark((function n(t,e){var r,i;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=d(t),i=[],n.next=4,e(r).then((function(n){console.log(n),i=Array.from(n).map((function(n){return{id:n,name:(0,p.E6)(n),isDir:x(n),isHidden:!1}}))}));case 4:return n.abrupt("return",Promise.resolve(i));case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),b=function(){var n=(0,s.Z)((0,u.Z)().mark((function n(t){var e,r,i,s,c,a,o;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(e={id:"@",name:"root",isHidden:!1,isDir:!0},r=[],i=t.substring(0,t.indexOf("::"))+"::",s=t.substring(t.indexOf("::")+2);""!==s;)a={id:c=i+s,name:(0,p.E6)(c),isHidden:!1,isDir:x(c)},r.unshift(a),o=s.lastIndexOf(":"),s=-1!==o?s.substring(0,o)+"@0":"";return r.unshift(e),n.abrupt("return",Promise.resolve(r));case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),v=function(n){return(0,c.useCallback)((function(t){t.id===o.p$.OpenFiles.id&&"undefined"!==typeof t.payload.targetFile&&n(t.payload.targetFile.id)}),[n])},y=[(0,o.S_)({id:"testPrint",requiresSelection:!0,button:{name:"Test",toolbar:!0,group:"Options"}})],Z=function(n){var t=(0,c.useState)([]),e=(0,i.Z)(t,2),a=e[0],f=e[1],l=(0,c.useState)([]),p=(0,i.Z)(l,2),d=p[0],x=p[1];(0,c.useEffect)((function(){function t(){return(t=(0,s.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(n.path).then((function(n){x((0,r.Z)(n))}));case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function e(){return e=(0,s.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n.path,n.getKeys).then((function(n){f((0,r.Z)(n))}));case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[n.path]);var Z=v(n.setPath);return(0,h.jsx)("div",{style:{height:400},children:(0,h.jsxs)(o.fy,{instanceId:n.instanceId,files:a,fileActions:y,folderChain:d,onFileAction:Z,thumbnailGenerator:function(n){return n.thumbnailUrl?"https://chonky.io".concat(n.thumbnailUrl):null},children:[(0,h.jsx)(o.Tn,{}),(0,h.jsx)(o.TY,{}),(0,h.jsx)(o.mF,{}),(0,h.jsx)(o.e9,{})]})})};t.default=function(){var n=(0,l.v9)((function(n){return n.jwt})).jwt,t=(0,l.v9)((function(n){return n.client})).client,e=((0,l.I0)(),(0,c.useState)("")),r=(0,i.Z)(e,2),o=r[0],f=r[1];function d(){return(d=(0,s.Z)((0,u.Z)().mark((function e(r){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],""!=r){e.next=6;break}return e.next=4,(0,p.eM)(t,n).then((function(n){i=n.map((function(n){return n.getKeyPath()}))}));case 4:e.next=8;break;case 6:return e.next=8,(0,p.eM)(t,n,r).then((function(n){i=n.map((function(n){return n.getKeyPath()}))}));case 8:return e.abrupt("return",Promise.resolve(i));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){""!=n&&""!=t&&f("@")}),[n,t]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(a.xH,{className:"mb-4",children:[(0,h.jsx)(a.sl,{children:(0,h.jsx)(a.rb,{children:(0,h.jsx)(a.b7,{sm:5,children:(0,h.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Storage Entries"})})})}),(0,h.jsx)(a.Bt,{children:(0,h.jsx)(a.rb,{className:"text-center",children:(0,h.jsx)(Z,{instanceId:"ah",path:o,setPath:f,getKeys:function(n){return d.apply(this,arguments)}})})})]})})}}}]);
//# sourceMappingURL=380.d0988df4.chunk.js.map